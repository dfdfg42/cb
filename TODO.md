# 모바일 턴제 카드게임 개발 TODO 리스트

## 프로젝트 개요
TypeScript 기반 모바일 턴제 카드게임 (최대 4인 플레이)

---

## 1. 프로젝트 초기 설정 ✅
- [x] 프로젝트 폴더 구조 생성
  - [x] `/src` - TypeScript 소스 파일
  - [x] `/src/styles` - 스타일시트
  - [x] `/src/ui` - UI 컴포넌트
  - [x] `/src/data` - 카드 데이터, 게임 설정 등
  - [x] `/src/types` - TypeScript 타입 정의
- [x] HTML 기본 템플릿 작성
- [x] TypeScript + Webpack 개발 환경 설정
- [x] CSS 반응형 모바일 UI 구현
- [x] Git 저장소 초기화 (.gitignore 생성)

---

## 2. 화면 UI 구현 ✅

### 2.1 메인 화면 (로그인 화면) ✅
- [x] 게임 타이틀 표시
- [x] 닉네임 입력 필드 구현
- [x] 입장하기 버튼 구현
- [x] 닉네임 유효성 검증 (공백, 길이 제한 등)
- [ ] 로컬 스토리지에 닉네임 저장 기능

### 2.2 로비 화면 ✅
- [x] 상단 네비게이션 바 (사용자 이름 표시)
- [x] 일반전 버튼 UI 및 기능
- [x] 랭크전 버튼 UI 및 기능
- [x] 도움말 버튼 UI 및 기능
- [x] 화면 전환 애니메이션

### 2.3 대기실 화면 ✅
- [x] 현재 접속한 플레이어 목록 표시 (최대 4명)
- [x] 각 플레이어의 준비 상태 표시
- [x] 준비 버튼 구현
- [x] 준비 취소 기능
- [x] 나가기 버튼
- [ ] 모든 플레이어 준비 시 게임 시작 로직 (서버 구현 필요)

### 2.4 게임 메인 화면 ✅
#### 상단 영역 ✅
- [x] 4명의 플레이어 정보 네모칸 UI
  - [x] 플레이어 이름 표시
  - [x] 체력 바 및 수치 표시
  - [x] 정신력 바 및 수치 표시
  - [x] 현재 턴 플레이어 하이라이트
  - [x] 사망/탈락 상태 표시
  - [x] 디버프 아이콘 표시 영역

#### 중앙 영역 (전투 필드) ✅
- [x] 공격자 영역 (왼쪽)
  - [x] 공격자 이름 표시
  - [x] 선택한 공격 카드 누적 표시
- [x] 방어자 영역 (오른쪽)
  - [x] 방어자 이름 표시
  - [x] 선택한 방어 카드 누적 표시
- [x] 필드 마법 효과 표시 영역
- [x] 턴 카운터 표시 (현재 턴 수)
- [x] 게임 로그/알림 메시지 영역

#### 하단 영역 (플레이어 손패) ✅
- [x] 부채꼴 형태의 카드 배치 UI
- [x] 카드 호버/선택 시 확대 효과
- [x] 카드 선택 시 하이라이트 표시
- [x] 카드 사용 확정 버튼
- [x] 턴 종료 버튼

### 2.5 카드 UI 디자인 ✅
- [x] 카드 기본 템플릿 디자인
  - [x] 카드 테두리 및 배경
  - [x] 카드 이름 영역
  - [x] 카드 이미지 영역 (아이콘)
- [x] 카드 정보 표시 (왼쪽 상단)
  - [x] 체력 공격력 아이콘 및 수치
  - [x] 정신 공격력 아이콘 및 수치
  - [x] 마법 카드: 정신 소모량
  - [x] 방어 카드: 방어력
- [x] 카드 타입별 색상 구분
  - [x] 공격 카드 (빨강)
  - [x] 방어 카드 (파랑)
  - [x] 마법 카드 (보라)
  - [x] 필드 마법 (초록)
- [x] + 접두사 표시 (연속 공격 가능 카드)
- [x] 카드 상세 툴팁 모달
  - [x] 카드 설명 텍스트
  - [x] 특수 효과 설명
  - [x] 닫기 버튼

### 2.6 도움말 화면 ✅
- [x] 게임 규칙 설명 페이지
- [x] 카드 타입 설명
- [x] 특수 효과 설명
- [x] 필드 마법 설명
- [x] 악마/천사 이벤트 설명
- [x] 뒤로 가기 버튼

---

## 3. 게임 로직 구현 🔄

### 3.1 게임 초기화 ✅
- [x] 플레이어 데이터 구조 설계
  ```typescript
  {
    id, name, health, mentalPower, cards[], 
    debuffs[], isAlive, isReady
  }
  ```
- [x] 카드 덱 데이터 구조 설계
- [x] 게임 상태 관리 객체 설계
- [x] 카드 덱 셔플 알고리즘
- [x] 초기 카드 9장 분배 로직 (테스트 구현)

### 3.2 턴 시스템 ✅
- [x] 턴 순서 결정 로직 (순차)
- [x] 현재 턴 플레이어 추적
- [x] 턴 카운터 증가 로직
- [x] 턴 종료 조건 확인
- [x] 다음 턴으로 전환
- [x] 멀티플레이어 턴 동기화 전송

### 3.3 카드 사용 로직 ✅
#### 공격 페이즈 ✅
- [x] 공격 카드 선택 가능 여부 확인
- [x] 일반 공격 카드 (1장만 사용)
- [x] + 접두사 카드 (여러 장 사용)
  - [x] +1, +2, +3 등 다양한 레벨 구현
  - [x] 선택 가능한 카드 수 제한
- [x] 마법 카드 (1장만 사용)
- [x] 공격 대상 선택 UI
- [x] 공격 확정 기능
- [x] 멀티플레이어 공격 동기화 전송

#### 방어 페이즈 ✅
- [x] 방어자 자동 지정
- [x] 방어 카드 선택 가능 여부 확인
- [x] 일반 방어 카드 (방어력 적용)
- [x] 피해 받으며 발동되는 특수 카드
- [x] 되받아치기 카드
  - [x] 공격자에게 데미지 반사
  - [x] 반사 데미지 계산
- [x] 튕기기 카드
  - [x] 랜덤 플레이어 선택 (자신 제외, 생존자만)
  - [x] 새로운 방어자 지정
- [x] 방어 확정 기능
- [x] 멀티플레이어 방어 동기화 전송

#### 연쇄 대응 시스템 ✅
- [x] 대응 턴 스택 관리
- [x] 튕기기/되받아치기 시 새로운 대응 턴 생성
- [x] 대응 턴 종료 조건
- [x] 모든 대응 종료 후 데미지 계산

### 3.4 데미지 계산
- [ ] 공격 카드 총합 계산
- [ ] 방어 카드 총합 계산
- [ ] 체력 데미지 적용
- [ ] 정신 공격력 계산
- [ ] 정신력 데미지 적용
- [ ] 데미지 애니메이션 효과

### 3.5 필드 마법 시스템
- [ ] 필드 마법 카드 데이터 정의
- [ ] 필드 마법 사용 가능 여부 확인
- [ ] 기존 필드 마법 제거 로직
- [ ] 새로운 필드 마법 적용
- [ ] 필드 마법 효과 종류
  - [ ] 발동자에게 이로운 효과 (체력 회복, 카드 추가 등)
  - [ ] 다른 플레이어에게 해로운 효과 (데미지, 카드 제거 등)
  - [ ] 전체 플레이어 영향 효과
- [ ] 필드 마법 지속 시간/조건 관리
- [ ] 필드 마법 시각 효과

### 3.6 특수 이벤트 시스템
#### 악마 이벤트 (50턴 이후)
- [ ] 50턴 도달 감지
- [ ] 매 턴 악마 출현 확률 계산
- [ ] 랜덤 플레이어 선택
- [ ] 악마 효과 랜덤 선택
  - [ ] 10 데미지
  - [ ] 20 데미지
  - [ ] 30 데미지
  - [ ] 카드 2장 랜덤 삭제
- [ ] 악마 이벤트 애니메이션/사운드

#### 천사 이벤트 (낮은 확률)
- [ ] 천사 출현 확률 계산
- [ ] 랜덤 플레이어 선택
- [ ] 천사 효과 랜덤 선택
  - [ ] 정신력 +10
  - [ ] 체력 +10
- [ ] 천사 이벤트 애니메이션/사운드

### 3.7 정신력 0 디버프 시스템
- [ ] 정신력 0 감지
- [ ] 디버프 종류 정의
  1. [ ] 매 턴 카드 1장 자동 소멸
  2. [ ] 공격 대상 랜덤 지정 (선택 불가)
  3. [ ] 기타 디버프 (추후 추가)
- [ ] 랜덤 디버프 적용
- [ ] 디버프 상태 UI 표시
- [ ] 디버프 효과 매 턴 실행
- [ ] 디버프 해제 조건 (정신력 회복 시)

### 3.8 승리/패배 조건
- [ ] 체력 0 이하 시 탈락 처리
- [ ] 탈락 플레이어 UI 업데이트
- [ ] 생존자 수 확인
- [ ] 최후 1인 시 승리 처리
- [ ] 승리/패배 화면 표시
- [ ] 게임 결과 통계 (딜량, 턴 수 등)
- [ ] 랭크전: 점수 계산 및 저장

---

## 4. 카드 데이터베이스 ✅

### 4.1 카드 데이터 구조 ✅
- [x] TypeScript 형식 카드 데이터 파일 작성
- [x] 카드 속성 정의
  ```typescript
  {
    id, name, type, 
    healthDamage, mentalDamage, defense,
    mentalCost, plusLevel,
    description, effect, image
  }
  ```

### 4.2 카드 종류별 데이터 작성 🔄
- [x] 공격 카드 (6종 구현)
  - [x] 일반 공격 카드 (베기, 강타, 참수)
  - [x] + 접두사 공격 카드 (+1, +2)
  - [x] 특수 효과 공격 카드 (정신 공격)
- [x] 방어 카드 (5종 구현)
  - [x] 일반 방어 카드 (막기, 철벽)
  - [x] 되받아치기 카드
  - [x] 튕기기 카드
  - [x] 피해 시 발동 카드 (반격)
- [x] 마법 카드 (4종 구현)
  - [x] 버프 마법 (축복)
  - [x] 디버프 마법
  - [x] 힐링 마법 (치유)
  - [x] 특수 효과 마법 (파이어볼, 정신붕괴)
- [x] 필드 마법 카드 (3종 구현)
  - [x] 공격 강화 필드 (화염의 대지)
  - [x] 지속 데미지 필드 (화염의 대지)
  - [x] 회복 필드 (치유의 성역)
  - [x] 혼돈 필드 (혼돈의 소용돌이)

### 4.3 카드 밸런싱 🔄
- [x] 각 카드 기본 수치 설정
- [x] 카드 랜덤 드로우 함수 구현
- [ ] 희귀도 시스템 (커먼, 레어, 에픽 등)
- [ ] 플레이 테스트 및 밸런스 패치

---

## 5. 멀티플레이어 시스템 ✅ 90% 완료

### 5.1 네트워크 선택 ✅
- [x] WebSocket 서버 선택 (Socket.io)
- [x] 서버 환경 설정 (Node.js + Express)
- [x] 클라이언트-서버 통신 프로토콜 정의

### 5.2 로비 시스템 ✅
- [x] 방 생성 기능
- [x] 방 목록 조회
- [x] 방 입장/퇴장
- [x] 일반전/랭크전 구분
- [x] 준비 상태 동기화
- [x] 게임 시작 신호 전송

### 5.3 게임 동기화 ✅
- [x] 게임 상태 실시간 동기화
- [x] 플레이어 액션 브로드캐스팅
  - [x] 카드 사용 (공격/방어)
  - [x] 대상 선택
  - [x] 턴 종료
- [x] 플레이어 상태 업데이트
- [x] 게임 종료 신호
- [ ] 카드 드로우 동기화 (필요 시)
- [ ] 특수 이벤트 동기화 (악마/천사)

### 5.4 에러 처리 🔄
- [x] 연결 끊김 감지
- [x] 플레이어 연결 해제 알림
- [ ] 재연결 로직 (추후 구현)
- [ ] 플레이어 이탈 시 AI 대체 (추후 구현)
- [x] 네트워크 오류 메시지 표시

---

## 6. 애니메이션 & 사운드

### 6.1 애니메이션
- [ ] 카드 드로우 애니메이션
- [ ] 카드 사용 애니메이션 (손패 → 필드)
- [ ] 데미지 효과 애니메이션
- [ ] 체력/정신력 바 감소 애니메이션
- [ ] 카드 파괴 애니메이션
- [ ] 필드 마법 발동 애니메이션
- [ ] 악마/천사 등장 애니메이션
- [ ] 승리/패배 애니메이션
- [ ] 화면 전환 애니메이션

### 6.2 사운드 효과
- [ ] 배경음악 (메인, 로비, 게임)
- [ ] 카드 드로우 사운드
- [ ] 카드 사용 사운드
- [ ] 공격 사운드
- [ ] 방어 사운드
- [ ] 데미지 사운드
- [ ] 마법 발동 사운드
- [ ] 특수 이벤트 사운드
- [ ] UI 클릭 사운드
- [ ] 승리/패배 사운드
- [ ] 볼륨 조절 기능

---

## 7. 랭크 시스템 (랭크전)

- [ ] 플레이어 등급 시스템 설계
  - [ ] 브론즈, 실버, 골드, 플래티넘, 다이아 등
- [ ] 점수 계산 알고리즘
  - [ ] 승리 시 점수 증가
  - [ ] 패배 시 점수 감소
  - [ ] 킬 수, 데미지 등 보너스 점수
- [ ] 랭킹 보드 UI
- [ ] 시즌 시스템 (선택 사항)
- [ ] 보상 시스템 (선택 사항)

---

## 8. 추가 기능 (선택 사항)

- [ ] 친구 시스템
- [ ] 채팅 기능 (로비, 게임 중)
- [ ] 이모티콘/스티커
- [ ] 전적 조회 시스템
- [ ] 리플레이 기능
- [ ] 덱 커스터마이징 (카드 선택)
- [ ] 카드 수집 시스템
- [ ] 상점 시스템 (코인, 카드팩)
- [ ] 업적 시스템
- [ ] 튜토리얼 모드
- [ ] AI 봇 대전 모드
- [ ] 관전 모드

---

## 9. 최적화 & 테스트

### 9.1 성능 최적화
- [ ] 모바일 터치 이벤트 최적화
- [ ] 이미지 최적화 (WebP, 압축)
- [ ] 코드 번들링 및 압축
- [ ] 레이지 로딩
- [ ] 메모리 누수 확인 및 수정
- [ ] 네트워크 트래픽 최적화

### 9.2 반응형 디자인
- [ ] 다양한 모바일 화면 크기 대응
- [ ] 세로/가로 모드 지원
- [ ] 터치 영역 최적화 (최소 44x44px)
- [ ] 태블릿 지원

### 9.3 테스트
- [ ] 단위 테스트 작성
- [ ] 통합 테스트
- [ ] 멀티플레이어 테스트 (4인 동시)
- [ ] 크로스 브라우저 테스트
  - [ ] Chrome Mobile
  - [ ] Safari Mobile
  - [ ] Samsung Internet
- [ ] 네트워크 지연 테스트
- [ ] 버그 추적 및 수정

---

## 10. 배포

- [ ] 도메인 구매 (선택 사항)
- [ ] 웹 호스팅 서비스 선택
  - [ ] 클라이언트: Netlify, Vercel, GitHub Pages
  - [ ] 서버: Heroku, AWS, DigitalOcean
- [ ] SSL 인증서 설정
- [ ] 빌드 및 배포 자동화 (CI/CD)
- [ ] 모니터링 시스템 구축
- [ ] 백업 시스템 구축

---

## 11. 문서화

- [ ] 게임 룰북 작성
- [ ] API 문서 작성
- [ ] 코드 주석 작성
- [ ] README.md 작성
- [ ] 패치 노트 작성 양식

---

## 우선순위별 개발 단계

### Phase 1: MVP (최소 기능 제품) ✅ 100% 완료
1. ✅ 기본 UI 구현 (메인, 로비, 게임 화면)
2. ✅ 로컬 게임 로직 구현 (1 vs AI 3명)
3. ✅ 카드 시스템 기본 구현
4. ✅ 턴 시스템 구현
5. ✅ 공격/방어 기본 로직
6. ✅ 연쇄 대응 시스템 (튕기기/되받아치기)

### Phase 2: 멀티플레이어 ✅ 90% 완료
1. ✅ WebSocket 서버 구축 (Socket.io)
2. ✅ 로비 시스템 (방 생성/참가/준비)
3. ✅ 4인 멀티플레이어 동기화 (공격/방어/턴종료)
4. 🔄 네트워크 에러 처리 (기본만 구현)

### Phase 3: 고급 기능
1. 필드 마법 시스템
2. 악마/천사 이벤트
3. 정신력 디버프 시스템
4. 연쇄 대응 시스템

### Phase 4: 폴리싱
1. 애니메이션 & 사운드
2. 랭크 시스템
3. 밸런싱
4. 최적화

### Phase 5: 출시 준비
1. 테스트 및 버그 수정
2. 도움말 작성
3. 배포
4. 마케팅 자료 준비

---

## 개발 진행 상황

### ✅ 완료된 작업 (2025-10-22)
1. **프로젝트 초기 설정 완료**
   - TypeScript + Webpack 환경 구축
   - 폴더 구조 생성
   - 개발 서버 실행 (localhost:3000)

2. **UI 컴포넌트 구현 완료**
   - CardComponent: 카드 렌더링 및 상호작용
   - HandManager: 손패 관리 및 부채꼴 배치
   - PlayerInfoComponent: 플레이어 정보 표시
   - PlayersManager: 4명 플레이어 관리
   - UIManager: 화면 전환 및 UI 업데이트
   - CombatUI: 전투 필드 시각화

3. **카드 데이터베이스 구축**
   - 31종 카드 구현 (공격 9, 방어 8, 마법 11, 필드마법 3)
   - 카드 타입 시스템
   - + 접두사 카드 시스템
   - 특수 효과 카드 (튕기기, 되받아치기, 반격 등)

4. **게임 로직 완료**
   - GameManager: 턴 관리, 공격/방어 처리
   - 턴 시스템: 순차 턴 진행, 탈락자 스킵
   - 공격 페이즈: 카드 선택, 대상 선택, 데미지 계산
   - 방어 페이즈: 방어 카드 선택, 특수 방어 처리
   - 연쇄 대응 시스템: 튕기기/되받아치기 무한 연쇄
   - AI 플레이어: 자동 공격/방어

5. **사운드 시스템 완료**
   - SoundManager: Web Audio API 기반
   - 10가지 사운드 효과 (클릭, 공격, 방어, 승리 등)

6. **멀티플레이어 시스템 구축 완료**
   - Socket.io 서버 (localhost:3001)
   - SocketClient 래퍼 클래스
   - 방 생성/참가/나가기 기능
   - 플레이어 준비 상태 동기화
   - 게임 시작 신호
   - 실시간 게임 액션 동기화:
     - 공격 액션 브로드캐스트
     - 방어 액션 브로드캐스트
     - 턴 종료 동기화
     - 플레이어 상태 업데이트
     - 게임 종료 신호

### 🔄 다음 단계 (Phase 3)
- [ ] 필드 마법 시스템 구현
- [ ] 악마/천사 이벤트 시스템
- [ ] 정신력 0 디버프 시스템
- [ ] 멀티플레이어 실제 테스트 및 버그 수정
- [ ] 애니메이션 추가

**현재 진행률: Phase 2 완료 - 90%**

---

## 기술 스택 ✅

### 프론트엔드
- HTML5 ✅
- CSS3 (Flexbox, Grid) ✅
- TypeScript 5.3 ✅
- 애니메이션: CSS Animations ✅
- 번들러: Webpack 5 ✅
- 개발 서버: Webpack Dev Server (HMR) ✅

### 백엔드
- Node.js
- Express.js
- Socket.io (WebSocket)
- 데이터베이스: MongoDB 또는 PostgreSQL (랭크 저장용)

### 도구
- Git (버전 관리)
- VS Code (개발 환경)
- Postman (API 테스트)
- Chrome DevTools (디버깅)

---

## 참고 사항
- 모든 수치(체력, 공격력 등)는 개발 중 밸런스 조정 필요
- 카드 효과는 모듈화하여 쉽게 추가/수정 가능하도록 설계
- 모바일 우선 개발 (Mobile First Design)
- 코드 재사용성과 유지보수성을 고려한 설계

---

**작성일: 2025-10-22**
